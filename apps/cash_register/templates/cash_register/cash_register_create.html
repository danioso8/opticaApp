{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Nueva Caja Registradora{% endblock %}

{% block content %}
<div class="mb-6">
    <a href="{% url 'cash_register:register_list' %}" class="text-blue-600 hover:text-blue-700 mb-4 inline-block">
        <i class="fas fa-arrow-left mr-2"></i>Volver a Cajas
    </a>
    <h1 class="text-3xl font-bold text-gray-900">Nueva Caja Registradora</h1>
    <p class="text-gray-600 mt-1">Crea una nueva caja para gestionar el flujo de efectivo</p>
</div>

<div class="max-w-2xl">
    <div class="bg-white rounded-xl shadow-lg p-6">
        <form method="post" id="createCashForm">
            {% csrf_token %}
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-cash-register mr-2 text-blue-600"></i>Nombre de la Caja *
                </label>
                <input 
                    type="text" 
                    name="name" 
                    id="name"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Ej: Caja Principal, Caja 2, Mostrador 1..."
                    required
                    autofocus
                >
                <p class="text-sm text-gray-500 mt-2">Nombre descriptivo para identificar la caja</p>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-map-marker-alt mr-2 text-blue-600"></i>Ubicación (Opcional)
                </label>
                <input 
                    type="text" 
                    name="location" 
                    id="location"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Ej: Mostrador 1, Planta baja, Segundo piso..."
                >
                <p class="text-sm text-gray-500 mt-2">Ubicación física de la caja (opcional)</p>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                <h3 class="font-semibold text-blue-900 mb-2">
                    <i class="fas fa-info-circle mr-2"></i>Información
                </h3>
                <ul class="text-sm text-blue-800 space-y-1">
                    <li><i class="fas fa-check mr-2"></i>La caja se creará en estado "Cerrada"</li>
                    <li><i class="fas fa-check mr-2"></i>Quedará activa y lista para usar</li>
                    <li><i class="fas fa-check mr-2"></i>Después podrás abrirla con un monto inicial</li>
                    <li><i class="fas fa-check mr-2"></i>Puedes crear múltiples cajas para diferentes puntos de venta</li>
                </ul>
            </div>

            <div class="flex space-x-3">
                <button 
                    type="submit" 
                    class="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"
                >
                    <i class="fas fa-plus mr-2"></i>Crear Caja Registradora
                </button>
                <a 
                    href="{% url 'cash_register:register_list' %}" 
                    class="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium text-center"
                >
                    <i class="fas fa-times mr-2"></i>Cancelar
                </a>
            </div>
        </form>
    </div>

    <!-- Sugerencias -->
    <div class="mt-6 bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-lg p-4">
        <h3 class="font-semibold text-indigo-900 mb-3">
            <i class="fas fa-lightbulb mr-2"></i>Sugerencias de Nombres
        </h3>
        <div class="grid grid-cols-2 gap-2">
            <button type="button" onclick="setName('Caja Principal')" class="px-3 py-2 bg-white hover:bg-indigo-100 rounded text-sm text-gray-700 border border-indigo-200 transition">
                <i class="fas fa-cash-register mr-1 text-indigo-600"></i>Caja Principal
            </button>
            <button type="button" onclick="setName('Caja 2')" class="px-3 py-2 bg-white hover:bg-indigo-100 rounded text-sm text-gray-700 border border-indigo-200 transition">
                <i class="fas fa-cash-register mr-1 text-indigo-600"></i>Caja 2
            </button>
            <button type="button" onclick="setName('Mostrador 1')" class="px-3 py-2 bg-white hover:bg-indigo-100 rounded text-sm text-gray-700 border border-indigo-200 transition">
                <i class="fas fa-store mr-1 text-indigo-600"></i>Mostrador 1
            </button>
            <button type="button" onclick="setName('Punto de Venta')" class="px-3 py-2 bg-white hover:bg-indigo-100 rounded text-sm text-gray-700 border border-indigo-200 transition">
                <i class="fas fa-shopping-cart mr-1 text-indigo-600"></i>Punto de Venta
            </button>
        </div>
    </div>
</div>

<script>
function setName(name) {
    document.getElementById('name').value = name;
    document.getElementById('name').focus();
}

// Validación del formulario
document.getElementById('createCashForm').addEventListener('submit', function(e) {
    const name = document.getElementById('name').value.trim();
    
    if (!name) {
        e.preventDefault();
        alert('Por favor ingresa un nombre para la caja');
        document.getElementById('name').focus();
    }
});
</script>
{% endblock %}
